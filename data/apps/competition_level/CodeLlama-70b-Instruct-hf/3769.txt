

Here is the Python 3 code that solves the problem:

```py
def get_answer(p, k):
    ans = 1
    for i in range(1, p):
        if pow(k, i, p) == 1:
            ans *= i
    return ans % (1000000007)


p, k = map(int, input().split())
print(get_answer(p, k))
```