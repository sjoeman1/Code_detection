

Here is the Python3 code for the problem:

```python
def max_range(a, segments):
    max_value = 0
    max_range = []
    for i in range(len(segments)):
        segment = segments[i]
        l, r = segment
        new_range = min(a[l-1:r]) - 1
        if new_range > max_value:
            max_value = new_range
            max_range = [i+1]
        elif new_range == max_value:
            max_range.append(i+1)
    return max_value, len(max_range), sorted(max_range)


if __name__ == '__main__':
    n, m = map(int, input().split())
    a = list(map(int, input().split()))
    segments = []
    for _ in range(m):
        l, r = map(int, input().split())
        segments.append([l, r])
    max_value, q, max_range = max_range(a, segments)
    print(max_value)
    print(q)
    print(*max_range)
```

This code first reads the input, then it calculates the maximum range, and finally, it prints the output.