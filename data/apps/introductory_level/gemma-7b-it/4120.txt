```python
n, m, k = map(int, input().split())

g = {i: set() for i in range(n)}
for i in range(m):
    a, b = map(int, input().split())
    g[a].add(b)
    g[b].add(a)

dp = [[0] * (n + 1) for _ in range(n + 1)]
dp[0][0] = 1

for i in range(1, n + 1):
    for j in range(i):
        dp[i][j] = dp[j][j]

k_ways = dp[n][n - 1]

t = min(k_ways, k)

print(t)

for i in range(t):
    print(''.join(['1' if g[i].__contains__(x) else '0' for x in range(m)]))
```